# ADR-001: Выбор структуры репозитория на основе GitOps

**Дата:** 2025-10-10

**Статус:** Принято

## Контекст

Нам необходима масштабируемая и понятная структура для управления всей инфраструктурой и конфигурациями приложений. Текущий подход с фокусом только на Ansible не охватывает всего жизненного цикла (CI/CD, Helm, ArgoCD) и может привести к хаосу.

## Принятое решение

Мы принимаем монорепозиторий с четким разделением ответственности:

- `/infrastructure`: Код для создания "железа" и базовой платформы (Ansible, Terraform).
- `/gitops`: Декларативное описание желаемого состояния приложений и сервисов в Kubernetes (конфигурация для ArgoCD).
- `/ci-templates`: Переиспользуемые шаблоны для пайплайнов.
- `/docs`: Документация.

## Обоснование

1.  **Разделение ответственности**: Код, который *создает* инфраструктуру, отделен от кода, который *описывает, что на ней работает*. Это снижает когнитивную нагрузку.
2.  **Масштабируемость**: Легко добавлять новые окружения, приложения и компоненты, следуя уже заданной структуре.
3.  **Прозрачность**: Git становится единым источником правды. Любое изменение в кластере можно отследить через коммит.
4.  **Автоматизация**: Такая структура идеально подходит для автоматизации через ArgoCD.
